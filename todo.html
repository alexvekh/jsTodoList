<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS To Do List</title>
    <style>
        body {background-color: black; color: bisque}
        div {text}

    </style>
</head>
<body>

    <input id="todo-title" type="text" />
    <button onclick="addTodo()">Add Todo</button><br /><br />
    <div id="todo-list"></div><br/>
    <button onclick="newDay()">New Day</button>
    
        
        <script>
            let todos
            
            const savedTodos  = JSON.parse(localStorage.getItem('todos'));
            if (Array.isArray(savedTodos)){
                todos = savedTodos;
            } else {
              todos = [
                {title: 'Get groceries', id: 'id1'}, 
                {title: 'Wash car', id: 'id2'}, 
                {title: 'Make dinner', id: 'id3'}, 
                {title: 'Do laundry', id: 'id4'}];
            }
            render();
            
            function newDay(){
                let today = new Date().toLocaleDateString();
                //let today2 = new Date().getDate();
                //const currentMonth = date.getMonth();
                //const t = 'today1 + '; 
                
                document.createElement('hr');
                let id0 = ''+1+ new Date().getTime();
                        todos.push({title: ' ___ Today: '+today, id: id0});
                let id1 = ''+2+ new Date().getTime();
                        todos.push({title: 'Course homework', id: id1});
                let id2 = ''+3 + new Date().getTime();
                        todos.push({title: 'Job', id: id2});
                let id3 = ''+4 + new Date().getTime();
                        todos.push({title: 'Coding 30 min sessoin', id: id3});
                let id4 = ''+5 + new Date().getTime();
                        todos.push({title: 'Coding 30 min session', id: id3});

                saveTodos();
                render();
            }

            
            function createTodo(title, dueDate){
                const id = '' + new Date().getTime();
                todos.push({
                            title: title, id: id,
                            });

            }

            function removeTodo(idToDelete) {
                todos = todos.filter(function(todo){
                    //id = idToDelete -> false
                    if (todo.id === idToDelete) {
                        return false;
                    } else {
                        return true;
                    }
                });
                saveTodos();
            }

            function saveTodos(){
                localStorage.setItem('todos', JSON.stringify(todos));

            }

            function addTodo() {
                const textbox = document.getElementById('todo-title');
                const title = textbox.value;
                createTodo(title);     
                render();
            }

            function deleteTodo(event){
                //console.log(event);
                const deleteButton = event.target;
                const idToDelete = deleteButton.id;

                removeTodo(idToDelete);
                render();
            }
//View
            function render() {
                // reset list
                document.getElementById('todo-list').innerHTML = '';

                todos.forEach(function (todo) {
                let element = document.createElement('div'); 
                element.innerText = todo.title;         
                
                const deleteButton = document.createElement('button');
                deleteButton.innerText = 'Delete';
                deleteButton.style = 'margin-left: 12px; background-color: red;';
                deleteButton.onclick = deleteTodo;
                deleteButton.id = todo.id;
                element.appendChild(deleteButton);

                const todoList = document.getElementById('todo-list');
                todoList.appendChild(element);     

            });
        }

        </script>
</body>
</html>

